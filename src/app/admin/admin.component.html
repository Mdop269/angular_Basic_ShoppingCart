<app-add-product></app-add-product>
<div style="overflow-x: auto;">
  <table mat-table [dataSource]="products" class="mat-elevation-z8" style="width: 100%; table-layout: fixed;">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> id </th>
      <td mat-cell *matCellDef="let product"> {{product.id}} </td>
    </ng-container>
    
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef> description </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="product.isEdit">
          <!-- Input element with max-width to prevent resizing -->
          <input type="text" [(ngModel)]="product.description" style="width: 100%; box-sizing: border-box;">
          <!-- what this function will do it will check if the value is there and return false so it wont run this
            but if there is no value which mean it is true so it will show the value  -->
          <div class="text-danger" *ngIf="validateField(product.description)">
            <span>Required</span>
          </div>
        </div> 
        <div *ngIf="!product.isEdit">
          {{product.description}}
        </div>
      </td>
    </ng-container>
    
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> name </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="product.isEdit">
          <input type="text" [(ngModel)]="product.name" style="width: 100%; box-sizing: border-box;">
          <div class="text-danger" *ngIf="validateField(product.name)">
            <span>Required</span>
          </div>
        </div>
        <div *ngIf="!product.isEdit">
          {{product.name}}
        </div>
      </td>
    </ng-container>
    
    <ng-container matColumnDef="imageName">
      <th mat-header-cell *matHeaderCellDef> imageName </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="product.isEdit">
          <input type="text" [(ngModel)]="product.imageName" style="width: 100%; box-sizing: border-box;">
          <div class="text-danger" *ngIf="validateField(product.imageName)">
            <span>Required</span>
          </div>
        </div>
        <div *ngIf="!product.isEdit">
          {{product.imageName}}
        </div>  
      </td>
    </ng-container>
    
    <ng-container matColumnDef="category">
      <th mat-header-cell *matHeaderCellDef> category </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="product.isEdit">
          <input type="text" [(ngModel)]="product.category" style="width: 100%; box-sizing: border-box;">
          <div class="text-danger" *ngIf="validateField(product.category)">
            <span>Required</span>
          </div>
        </div>
        <div *ngIf="!product.isEdit">
          {{product.category}}
        </div>    
      </td>
    </ng-container>
    
    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef> price </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="product.isEdit">
          <input type="number" [(ngModel)]="product.price" style="width: 100%; box-sizing: border-box;">
          <div class="text-danger" *ngIf="validateField(product.price)">
            <span>Required</span>
          </div>
        </div>
        <div *ngIf="!product.isEdit">
          {{product.price}}
        </div>  
      </td>
    </ng-container>
    
    <ng-container matColumnDef="quantityShouldBe">
      <th mat-header-cell *matHeaderCellDef> quantityShouldBe </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="product.isEdit">
          <input type="number" [(ngModel)]="product.quantityShouldBe" style="width: 100%; box-sizing: border-box;">
          <div class="text-danger" *ngIf="validateField(product.quantityShouldBe)">
            <span>Required</span>
          </div>
        </div>
        <div *ngIf="!product.isEdit">
          {{product.quantityShouldBe}}
        </div>  
      </td>
    </ng-container>
    
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> </th>
      <td mat-cell *matCellDef="let product">
        <div *ngIf="!product.isEdit">
          <div class="text-center icons-space">
            <fa-icon [icon]="faPencilSquare" aria-hidden="true" (click)="onEdit(product)"></fa-icon>
            <fa-icon [icon]="faTrash" aria-hidden="true" (click)="onDelete(product)"></fa-icon>
          </div>
        </div>
        <div *ngIf="product.isEdit">
          <div class="text-center icons-space">
            <!-- with disabled which is a button method if the value is null or empty it wont give access to be clicked  -->
            <button class="button" [disabled]="validateForm(product)" (click)="updateProduct(product)">Update</button>
            <button class="button" (click)="onCancel(product)">Cancel</button>
          </div>
        </div>
      </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="['id', 'description', 'name', 'imageName', 'category', 'price', 'quantityShouldBe', 'actions']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['id', 'description', 'name', 'imageName', 'category', 'price', 'quantityShouldBe', 'actions']"></tr>
  </table>
  
</div>


    <!-- <ul class="products">
        <li class="product-item" >
          
        @for (product of getFilteredProducts(); track product.id) {   
            <div class="product">
                <div class="product-details">
                  <img [src]="product.imageName" [alt]="product.imageName" />
                  <div class="product-info">
                    <div class="name red">{{ product.name }}</div>
                    <div class="description">{{ product.description }}</div>
                    <div class="category">Part Type: {{ product.category}}</div>
                  </div>
                </div>
                <div class="price" style="display: inline-block; text-align: center; margin-bottom: 10px;">
                    <div>{{ product.price }}</div>
                    <div>{{ product.quantityShouldBe }}</div>
                    <button style="margin-left: 10px; background-color: #91b51a">Edit</button>
                  </div>
                         
                </div>
                }
        </li>
    </ul>
     -->
